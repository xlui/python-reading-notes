有时在处理请求之前或之后执行代码会很有用。例如，在请求开始时，我们可能需要创建数据库或者认证发起请求的用户。

为了避免在每个视图函数中都使用重复的代码， Flask 提供了注册通用函数的功能，注册的函数可在请求被分发到视图函数之前或之后调用。

请求钩子使用修饰器实现。Flask 支持以下 4 中钩子。

钩子|说明
---|---
before_first_request|注册一个函数，在处理第一个请求之前运行
before_request|注册一个函数，在每次请求前运行
after_request|注册一个函数，如果没有未处理的异常抛出，在每次请求之后运行
teardown_request|注册一个函数，即使有未处理的异常抛出，也在每次请求之后运行

在请求钩子函数和视图函数之间共享数据一般使用上下文全局变量 g。例如,before_request 处理程序可以从数据库中加载已登录用户，并将其保存到 g.user 中。随后调用视图函数时，视图函数再使用 g.user 获取用户。
